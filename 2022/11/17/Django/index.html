<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="python">
    <meta name="description" content="欢迎来到我的笔记空间">
    <meta name="author" content="Xu">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-redefine.png">
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2022/11/17/django/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Django">
    <meta property="og:description" content="欢迎来到我的笔记空间">
    <meta property="og:url" content="http://example.com2022/11/17/Django/">
    <meta property="og:image" content="/images/redefine-logo.svg">
    <meta property="og:site_name" content="Xu">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Django">
    <meta name="twitter:description" content="欢迎来到我的笔记空间">
    <meta name="twitter:image" content="/images/redefine-logo.svg">
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/redefine-logo.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-logo.svg">
    <meta name="theme-color" content="#005080">
    <link rel="shortcut icon" href="/images/redefine-logo.svg">
    
    <title>
        
            Django -
        
        Xu
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    
    
    
    
    <script id="hexo-configurations">
    let REDEFINE = window.REDEFINE || {};
    REDEFINE.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    REDEFINE.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#005080","avatar":"/images/redefine-avatar.svg","favicon":"/images/redefine-logo.svg","article_img_align":"center","right_side_width":"210px","content_max_width":"1000px","nav_color":{"left":"#f78736","right":"#367df7","transparency":35},"hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_image":{"light":"https://evan.beee.top/img/wallhaven-wqery6-light.webp","dark":"https://evan.beee.top/img/wallhaven-wqery6-dark.webp"},"title_color":{"light":"#fff","dark":"#d1d1b6"},"description":"Xu","custom_font":{"enable":false,"font_family":null,"font_url":null}},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":false,"preload":true},"code_block":{"copy":true,"style":"mac","custom_font":{"enable":false,"font_family":null,"font_url":null}},"pjax":{"enable":true},"lazyload":{"enable":true},"friend_links":{"columns":2},"home_article":{"date_format":"auto","category":{"enable":true,"limit":3},"tag":{"enable":true,"limit":3}},"plugins":{"aplayer":{"enable":false,"audio":[{"name":null,"artist":null,"url":null,"cover":null},{"name":null,"artist":null,"url":null,"cover":null}]}}};
    REDEFINE.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
  </script>
    
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="menu-wrapper">
    
    <div class="menu-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Xu
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="pc">
                <ul class="menu-list">
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        归档
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    target="_blank" rel="noopener" href="https://status.evanluo.top/"  >
                                    
                                        
                                            <i class="fa-regular fa-chart-bar"></i>
                                        
                                        状态
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">我
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://code-xushuai.github.io">BLOG
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="/friends">FRIENDS
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-link"></i>
                                        
                                        友链&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://roweller.github.io/">ROWLLER
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://Krisxf.github.io/">KRISXF
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://redefine-docs.ohevan.com/docs/intro">主题文档
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="menu-drawer">
        <ul class="drawer-menu-list">
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                归档
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        target="_blank" rel="noopener" href="https://status.evanluo.top/"  >
                             
                                
                                    <i class="fa-regular fa-chart-bar"></i>
                                
                                状态
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">我</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://code-xushuai.github.io">BLOG</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/friends">FRIENDS</a>
                            </li>
                        
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-link"></i>
                                
                                友链&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://roweller.github.io/">ROWLLER</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://Krisxf.github.io/">KRISXF</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://redefine-docs.ohevan.com/docs/intro">主题文档</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">Django</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/redefine-avatar.svg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Xu</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="pc">2022-11-17 21:57:31</span>
        <span class="mobile">2022-11-17 21:57</span>
        <span class="hover-info">创建时间</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="pc">2023-01-03 15:02:24</span>
            <span class="mobile">2023-01-03 15:02</span>
            <span class="hover-info">更新时间</span>
        </span>
    

    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E6%A1%86%E6%9E%B6/">框架</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Django是一个基于Python的Web应用框架。主要是用来快速搭建高性能网站，网站CMS内容管理系统板块建设等</p>
<hr>
<br>

<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><ul>
<li>删除templates目录</li>
<li>删除setting文件中新增代码<br><img src="/image/31.png"></li>
</ul>
<hr>
<br>

<h2 id="默认文件介绍"><a href="#默认文件介绍" class="headerlink" title="默认文件介绍"></a>默认文件介绍</h2><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/image/32.png"></h2><br>

<h2 id="App"><a href="#App" class="headerlink" title="App"></a>App</h2><ul>
<li>作用：类似不同的功能<br><img src="/image/33.png"></li>
<li>创建app：pycharm终端输入python manage.py startapp app1<br><img src="/image/34.png"></li>
</ul>
<hr>
<br>

<h2 id="启动django"><a href="#启动django" class="headerlink" title="启动django"></a>启动django</h2><ul>
<li>app注册 【setting.py】<br>在setting文件中找到INSTALLED_APPS添加‘app1.apps.App1Config’(相当于导入app类)</li>
<li>编写url和视图函数对应关系【urls.py】<br><img src="/image/35.png"></li>
<li>编写视图函数【app1-&gt;views.py】<br>默认views.py为空，编写你在urls.py中使用的函数，默认需要有一个参数request<br><img src="/image/36.png"></li>
<li>启动</li>
</ul>
<hr>
<ul>
<li>多页面<br>写多个urls.py–&gt;views.py<br><img src="/image/20.jpg"></li>
</ul>
<hr>
<br>

<h2 id="templates模板"><a href="#templates模板" class="headerlink" title="templates模板"></a>templates模板</h2><ul>
<li>【views.py】返回字符串：return HttpResponse(‘xxxx’)</li>
<li>【views.py】返回页面：return render(request,’xxx.html’)<br>xxx.html–&gt;</li>
</ul>
<p>1.优先去（之前删除的配置信息）项目的根目录下寻找templates<br>2.去app目录下的templates目录下寻找xxx.html（根据app注册顺序依次在templates目录寻找）</p>
<hr>
<br>

<h2 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h2><ul>
<li>开发过程中：图片、CSS、js、插件都会当作静态文件处理。<br>需要在app目录下新建static文件分类保存<br><img src="/image/37.png"></li>
<li>引用语法<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">load</span></span> static %&#125;</span></span><br></pre></td></tr></table></figure>
<img src="/image/21.jpg"></li>
</ul>
<hr>
<br>

<h2 id="django模块语法"><a href="#django模块语法" class="headerlink" title="django模块语法"></a>django模块语法</h2><ul>
<li>本质上：在html中写一些占位符，由数据对这些占位符进行替换和处理<br><img src="/image/39.png"></li>
<li>【views.py】中定义函数的参数传入：以字典的形式传入</li>
<li>【templates】文件中xxx.html接收参数：<ul>
<li>循环语法<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> i <span class="keyword">in</span> names %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&lt; div &gt; i &lt; div &gt;</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>
<img src="/image/38.png"></li>
</ul>
</li>
<li>if语句<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> name == &#x27;学生&#x27; %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>xxxxxxx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">else</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>sssssss<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> name == &#x27;学生&#x27; %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>xxxxxxx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">elif</span></span> name == &#x27;sx&#x27; %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>sssssss<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>联通案例<ul>
<li>【urls.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 联通新闻中心</span></span><br><span class="line">path(<span class="string">&#x27;news/&#x27;</span>, views.news),</span><br></pre></td></tr></table></figure></li>
<li>【views.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">news</span>(<span class="params">req</span>):</span><br><span class="line"><span class="comment"># 定义一些新闻-----&gt; 网络请求去联通新闻中心</span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">url = <span class="string">&#x27;http://www.chinaunicom.com.cn/api/article/NewsByIndex/2/2022/11/news&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla / 5.0(WindowsNT10 .0;  Win64;  x64) AppleWebKit / 537.36(KHTML, likeGecko)   Chrome / 107.0  .0   .0  Safari / 537.36Edg / 107.0.1418.42&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">request = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">content = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">data_list = json.loads(content)</span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br><span class="line"><span class="keyword">return</span> render(req, <span class="string">&quot;news.html&quot;</span>, &#123;<span class="string">&#x27;content&#x27;</span>: data_list&#125;)</span><br></pre></td></tr></table></figure></li>
<li>【templates目录】创建news.html<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>联通新闻中心<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;%  <span class="name"><span class="name">for</span></span> i <span class="keyword">in</span> content %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123; i.news_title &#125;&#125;</span><span class="language-xml">  时间： </span><span class="template-variable">&#123;&#123; i.post_time &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<br>

<h2 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h2><ul>
<li>【views.py】</li>
<li>请求<ul>
<li>1.获取请求方式 GET/POST<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.method)</span><br></pre></td></tr></table></figure></li>
<li>2.在URL上传递值  /something/?n1=123&amp;n2=999<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">        <span class="built_in">print</span>(request.GET)</span><br><span class="line">    ```    </span><br><span class="line">    - <span class="number">3.</span>在请求体中提交数据</span><br><span class="line">    ```python</span><br><span class="line">        <span class="built_in">print</span>(request.POST)</span><br><span class="line">    ```  </span><br><span class="line">- 响应</span><br><span class="line">    <span class="number">1.</span>HttpResponse(<span class="string">&quot;&quot;</span>),内容以字符串的形式返回给请求值</span><br><span class="line">    ```python</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
  2.返回一个网页给请求者  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> render(request,<span class="string">&quot;something.html&quot;</span>)</span><br></pre></td></tr></table></figure>
  3.让浏览器重定向到其他页面  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>用户登录案例<ul>
<li>【urls.py】—&gt;url和视图函数对应关系<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户登录</span></span><br><span class="line">path(<span class="string">&#x27;login/&#x27;</span>, views.login),</span><br></pre></td></tr></table></figure></li>
<li>【views.py】—&gt;定义视图函数<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户登录</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 如果是post请求，获取用户提交数据</span></span><br><span class="line">        <span class="comment"># print(request.POST)</span></span><br><span class="line">        username = request.POST.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> username == <span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;123&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> HttpResponse(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render(request,<span class="string">&quot;login.html&quot;</span>,&#123;<span class="string">&#x27;messge&#x27;</span>: <span class="string">&#x27;用户名或密码错误&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure></li>
<li>【templates.py】<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/login/&quot;</span>&gt;</span></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确认&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span>&#123;&#123; messge &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<br>

<h2 id="orm—-gt-数据库操作"><a href="#orm—-gt-数据库操作" class="headerlink" title="orm—&gt;数据库操作"></a>orm—&gt;数据库操作</h2><ul>
<li>安装第三方模块mysqlclient</li>
<li>orm<ul>
<li>创建、增加、删除表</li>
<li>无法创建数据库</li>
<li>操作表中的数据</li>
</ul>
</li>
<li>【setting.py】—&gt;修改DETABASE配置<br><img src="/image/40.png"></li>
<li>django操作表<ul>
<li>【app1–&gt;models.py】—-&gt;写一个类创建表<br><img src="/image/41.png"></li>
<li>执行命令<br>python manage.py makemigrations<br>python manage.py migrate</li>
</ul>
</li>
<li>在表中新增列时，必须指定新增列对应数据<ul>
<li>1选项—&gt;手动输入一个值</li>
<li>2选项—&gt;age = models.IntegerField(default=2)</li>
<li>允许为空—&gt;age = models.IntegerField(null=True,blank=True)</li>
</ul>
<hr>
</li>
<li><em><strong>表中插入数据</strong></em><ul>
<li>导入到具体的类<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app1.models <span class="keyword">import</span> userInfo</span><br><span class="line"><span class="comment"># 导入到具体的类</span></span><br><span class="line">UserInfo.objects.create(name=<span class="string">&#x27;学生&#x27;</span>,password=<span class="string">&#x27;123&#x27;</span>,age=<span class="number">19</span>)</span><br></pre></td></tr></table></figure></li>
<li>导入到模块<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app1 <span class="keyword">import</span> models</span><br><span class="line"><span class="comment"># 导入到模块</span></span><br><span class="line">models.UserInfo.objects.create(name=<span class="string">&#x27;学生&#x27;</span>,password=<span class="string">&#x27;123&#x27;</span>,age=<span class="number">19</span>)</span><br></pre></td></tr></table></figure></li>
<li>测试orm<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试orm</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">orm</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">from</span> app1 <span class="keyword">import</span> models</span><br><span class="line">    models.UserInfo.objects.create(name=<span class="string">&#x27;学生&#x27;</span>, password=<span class="string">&#x27;123&#x27;</span>, age=<span class="number">19</span>)</span><br><span class="line">    models.UserInfo.objects.create(name=<span class="string">&#x27;形式&#x27;</span>, password=<span class="string">&#x27;456&#x27;</span>, age=<span class="number">12</span>)</span><br><span class="line">    models.UserInfo.objects.create(name=<span class="string">&#x27;范围&#x27;</span>, password=<span class="string">&#x27;133&#x27;</span>, age=<span class="number">89</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;操作成功&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><em><strong>删除表中数据</strong></em>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app1.models <span class="keyword">import</span> userInfo</span><br><span class="line"><span class="comment"># filter(id=1)选择id=1的这条数据----&gt;条件筛选</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">1</span>).delete()  </span><br><span class="line">UserInfo.objects.<span class="built_in">all</span>().delete()</span><br></pre></td></tr></table></figure></li>
<li><em><strong>获取表中数据</strong></em>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># UserInfo.objects.all()是一个QuerySet类型</span></span><br><span class="line"><span class="comment"># data_list = [对象、对象····]</span></span><br><span class="line">data_list = UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(obj.<span class="built_in">id</span>,obj.name,obj.password,obj.age)</span><br><span class="line"></span><br><span class="line"><span class="comment"># data_list = UserInfo.objects.filter(id=1)   仍然是一个列表，只是列表中只有一个对象，需要取到对象之后在进行操作</span></span><br><span class="line"><span class="comment"># print(data_list[0].id, data_list[0].name, data_list[0].password, data_list[0].age)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># obj = UserInfo.objects.filter(id=1).first()   是一个对象，直接对象.进行操作</span></span><br><span class="line"><span class="comment"># print(obj.id, obj.name, obj.password, obj.age)</span></span><br></pre></td></tr></table></figure></li>
<li><em><strong>更新表中数据</strong></em>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app1.models <span class="keyword">import</span> userInfo</span><br><span class="line"><span class="comment"># filter(id=4)----&gt;筛选条件</span></span><br><span class="line">UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">4</span>).update(<span class="built_in">id</span>=<span class="number">1</span>,name=<span class="string">&quot;阿达&quot;</span>,password=<span class="number">456</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="案例：用户管理"><a href="#案例：用户管理" class="headerlink" title="案例：用户管理"></a>案例：用户管理</h2><ul>
<li>【url.py】  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.展示用户</span></span><br><span class="line">path(<span class="string">&#x27;info/list&#x27;</span>, views.info_list),</span><br><span class="line"><span class="comment"># 2.添加用户</span></span><br><span class="line">path(<span class="string">&#x27;info/add&#x27;</span>, views.info_add),</span><br><span class="line"><span class="comment"># 3.删除用户</span></span><br><span class="line">path(<span class="string">&#x27;info/delete&#x27;</span>, views.info_delete),</span><br></pre></td></tr></table></figure></li>
<li>【views.py】  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.展示用户</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 1.获取数据库中所有用户</span></span><br><span class="line">    <span class="keyword">from</span> app1.models <span class="keyword">import</span> UserInfo</span><br><span class="line">    data_list = UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;info_list.html&quot;</span>, &#123;<span class="string">&quot;data_list&quot;</span>: data_list&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.添加用户</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">from</span> app1.models <span class="keyword">import</span> UserInfo</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;info_add.html&quot;</span>)</span><br><span class="line">    <span class="comment"># 后台接收数据</span></span><br><span class="line">    name = request.POST.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    pwd = request.POST.get(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">    age = request.POST.get(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">    <span class="comment"># 写入数据库</span></span><br><span class="line">    UserInfo.objects.create(name=name, password=pwd, age=age)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/info/list&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.删除用户</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info_delete</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">from</span> app1.models <span class="keyword">import</span> UserInfo</span><br><span class="line">    nid = request.GET.get(<span class="string">&#x27;nid&#x27;</span>)</span><br><span class="line">    UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/info/list&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>【templates】<ul>
<li>info_list.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/info/add&quot;</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    &#123;% for obj in data_list %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.id &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.name &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.password &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; obj.age &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://127.0.0.1:8000/info/delete?nid=&#123;&#123; obj.id &#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>info_add.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户输入<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<br>

<h2 id="创建表结构"><a href="#创建表结构" class="headerlink" title="创建表结构"></a>创建表结构</h2><ul>
<li><p>verbose_name：注释这一列表示什么意思</p>
</li>
<li><p>字段:小数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DecimalField 准确的小数值</span></span><br><span class="line"><span class="comment"># max_digits 最大长度</span></span><br><span class="line"><span class="comment"># decimal_places 小数位数</span></span><br><span class="line"><span class="comment"># default 默认值为0</span></span><br><span class="line">account = models.DecimalField(verbose_name=<span class="string">&quot;余额&quot;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_time = models.DateTimeField(verbose_name=<span class="string">&quot;入职时间&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>关联表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">关联表</span></span><br><span class="line"><span class="string">1.有约束</span></span><br><span class="line"><span class="string">    -to  与哪张表进行关联</span></span><br><span class="line"><span class="string">    -to_field  与表中的哪一列进行关联 </span></span><br><span class="line"><span class="string">2.django自动</span></span><br><span class="line"><span class="string">-写的depart会自动生成depart_id</span></span><br><span class="line"><span class="string">3.关联表中有被删除的</span></span><br><span class="line"><span class="string">    -级联删除  on_delete=models.CASCADE</span></span><br><span class="line"><span class="string">    -置空  null=True, blank=True,on_delete=models.SET_NULL</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, null=<span class="literal">True</span>, blank=<span class="literal">True</span>,on_delete=models.SET_NULL)</span><br></pre></td></tr></table></figure></li>
<li><p>创建数据库</p>
</li>
<li><p>修改setting.py中的配置文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;django_1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>选择框</p>
<ul>
<li>【models.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">status_choices = (</span><br><span class="line">    (<span class="number">0</span>, <span class="string">&#x27;已使用&#x27;</span>),</span><br><span class="line">    (<span class="number">1</span>, <span class="string">&#x27;未使用&#x27;</span>)</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 节省空间</span></span><br><span class="line">status = models.SmallIntegerField(verbose_name=<span class="string">&quot;状态&quot;</span>, choices=status_choices)</span><br></pre></td></tr></table></figure></li>
<li>【.html】:页面展示出中文<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><span class="template-variable">&#123;&#123; obj.get_level_display &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>输入命名：makemigrations </p>
<pre><code>     migration
</code></pre>
<p>  *** 只要修改表都要执行一次命令 ***</p>
</li>
</ul>
<hr>
<br>

<h2 id="表关联（案例：联通部门管理系统）"><a href="#表关联（案例：联通部门管理系统）" class="headerlink" title="表关联（案例：联通部门管理系统）"></a>表关联（案例：联通部门管理系统）</h2><ul>
<li>【models.py】—&gt;创表<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 部门表 &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># verbose_name 注释这一列表示什么意思</span></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;部门名称&#x27;</span>, max_length=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 员工表 &quot;&quot;&quot;</span></span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;姓名&quot;</span>, max_length=<span class="number">16</span>)</span><br><span class="line">    password = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;年龄&quot;</span>)</span><br><span class="line">    <span class="comment"># DecimalField 准确的小数值</span></span><br><span class="line">    <span class="comment"># max_digits 最大长度</span></span><br><span class="line">    <span class="comment"># decimal_places 小数位数</span></span><br><span class="line">    <span class="comment"># default 默认值为0</span></span><br><span class="line">    account = models.DecimalField(verbose_name=<span class="string">&quot;余额&quot;</span>, max_digits=<span class="number">10</span>, decimal_places=<span class="number">2</span>, default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(verbose_name=<span class="string">&quot;入职时间&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    关联表</span></span><br><span class="line"><span class="string">    1.有约束</span></span><br><span class="line"><span class="string">        -to  与哪张表进行关联</span></span><br><span class="line"><span class="string">        -to_fields  与表中的哪一列进行关联 </span></span><br><span class="line"><span class="string">    2.django自动</span></span><br><span class="line"><span class="string">    -写的depart会自动生成depart_id</span></span><br><span class="line"><span class="string">    3.关联表中有被删除的</span></span><br><span class="line"><span class="string">        -级联删除  on_delete=models.CASCADE</span></span><br><span class="line"><span class="string">        -置空  null=True, blank=True,on_delete=models.SET_NULL</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    depart = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>, to_field=<span class="string">&quot;id&quot;</span>, on_delete=models.CASCADE)</span><br><span class="line">    <span class="comment"># depart = models.ForeignKey(to=&quot;Department&quot;, to_fields=&quot;id&quot;, null=True, blank=True,on_delete=models.SET_NULL)</span></span><br></pre></td></tr></table></figure></li>
<li>【urls.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 部门列表</span></span><br><span class="line">path(<span class="string">&#x27;depart/list/&#x27;</span>, views.depart_list),</span><br><span class="line"><span class="comment"># 新建部门</span></span><br><span class="line">path(<span class="string">&#x27;depart/add/&#x27;</span>, views.depart_add),</span><br><span class="line"><span class="comment"># 删除部门</span></span><br><span class="line">path(<span class="string">&#x27;depart/delete/&#x27;</span>, views.depart_delete),</span><br><span class="line"><span class="comment"># 编辑部门</span></span><br><span class="line">path(<span class="string">&#x27;depart/&lt;int:nid&gt;/edit/&#x27;</span>, views.depart_edit),</span><br></pre></td></tr></table></figure></li>
<li>【views.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, redirect</span><br><span class="line"><span class="keyword">from</span> app1.models <span class="keyword">import</span> Department</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 部门列表 &quot;&quot;&quot;</span></span><br><span class="line">    data_list = Department.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;depart_list.html&#x27;</span>, &#123;<span class="string">&quot;data_list&quot;</span>: data_list&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 新建部门 &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;depart_add.html&quot;</span>)</span><br><span class="line">    <span class="comment"># 接收数据</span></span><br><span class="line">    title = request.POST.get(<span class="string">&quot;title&quot;</span>)</span><br><span class="line">    <span class="comment"># 保存数据库</span></span><br><span class="line">    Department.objects.create(title=title)</span><br><span class="line">    <span class="comment"># 重定向</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;http://127.0.0.1:8000/depart/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_delete</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 删除部门 &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># http://127.0.0.1:8000/depart/delete/?nid=1</span></span><br><span class="line">    nid = request.GET.get(<span class="string">&quot;nid&quot;</span>)</span><br><span class="line">    <span class="comment"># 数据库删除</span></span><br><span class="line">    Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;http://127.0.0.1:8000/depart/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_edit</span>(<span class="params">request,nid</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 编辑部门 &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="comment"># 获取的为一个列表</span></span><br><span class="line">        obj = Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;depart_edit.html&quot;</span>, &#123;<span class="string">&quot;obj&quot;</span>:obj&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 拿到数据,进行更新</span></span><br><span class="line">    title = request.POST.get(<span class="string">&quot;title&quot;</span>)</span><br><span class="line">    Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).update(title=title)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;http://127.0.0.1:8000/depart/list/&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li>template—&gt;xxx.html</li>
<li>将选择框0/1对应的汉字显示到前端页面<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; obj.get_status_display &#125;&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>将关联表对应的信息显示到前端页面<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;&#123; obj.admin.user &#125;&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="模板的继承"><a href="#模板的继承" class="headerlink" title="模板的继承"></a>模板的继承</h2><ul>
<li>定义模板layout.py<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">block</span></span> content %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endblock</span></span> %&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>继承母版<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">extends</span></span> &quot;layout.html&quot; %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">block</span></span> content %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">内容</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endblock</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="案例：联通员工管理"><a href="#案例：联通员工管理" class="headerlink" title="案例：联通员工管理"></a>案例：联通员工管理</h2><ul>
<li>日期<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><span class="template-variable">&#123;&#123; obj.create_time|<span class="name">date</span>:<span class="string">&#x27;Y-m-d&#x27;</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>部门选择<ul>
<li>数据库查找数据并传入参数<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">content = &#123;</span><br><span class="line">    <span class="string">&quot;depart_list&quot;</span>: Department.objects.<span class="built_in">all</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&quot;user_add.html&quot;</span>,content)</span><br></pre></td></tr></table></figure></li>
<li>前端页面接收参数（循环出来）<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">label</span>&gt;</span>部门<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> i <span class="keyword">in</span> depart_list %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123; i.title &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123; i.title &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<br>

<h2 id="Form组件"><a href="#Form组件" class="headerlink" title="Form组件"></a>Form组件</h2><ul>
<li>组件的作用<ul>
<li>用于用户页面提交数据的校验</li>
<li>用户提交错误时提示</li>
<li>不用写页面的input框<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line">            </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>【views.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Myform</span>(<span class="title class_ inherited__">form</span>):</span><br><span class="line">    user_name = forms.CharField(widget=forms.Input)</span><br><span class="line">    password = forms.CharField(widget=forms.Input)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span></span><br><span class="line">        form = Myform()</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&quot;user_add.html&quot;</span>,&#123;<span class="string">&quot;form&quot;</span>:form&#125;)</span><br></pre></td></tr></table></figure></li>
<li>【”user_add.html】<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; form.user &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-variable">&#123;&#123; form.password &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    //替换input框</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> i <span class="keyword">in</span> form %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-variable">&#123;&#123; i &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="ModelForm组件"><a href="#ModelForm组件" class="headerlink" title="ModelForm组件"></a>ModelForm组件</h2><ul>
<li>针对数据库中某个表的操作<ul>
<li>用于用户页面提交数据的校验</li>
<li>用户提交错误时提示</li>
<li>不用写页面的input框</li>
</ul>
</li>
<li>【views.py】：需要定义一个类</li>
<li>数据表中的字段<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserModelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.UserInfo</span><br><span class="line">        <span class="comment"># 自定义字段</span></span><br><span class="line">        fields = [<span class="string">&quot;name&quot;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;account&#x27;</span>, <span class="string">&#x27;create_time&#x27;</span>, <span class="string">&#x27;depart&#x27;</span>]</span><br><span class="line">        <span class="comment"># 所有字段</span></span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        <span class="comment"># 除什么之后的字段</span></span><br><span class="line">        exclude = [<span class="string">&#x27;level&#x27;</span>]</span><br></pre></td></tr></table></figure></li>
<li>bootstrap样式<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 插件（样式）</span></span><br><span class="line">widgets = &#123;</span><br><span class="line">       <span class="string">&#x27;name&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">       <span class="string">&#x27;password&#x27;</span>: forms.PasswordInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">       <span class="string">&#x27;age&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">       <span class="string">&#x27;account&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">       <span class="string">&#x27;create_time&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">       <span class="string">&#x27;depart&#x27;</span>: forms.Select(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
<li>用正则表达式校验信息【在创建的类中写】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.validators <span class="keyword">import</span> RegexValidator</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrettyModelFrom</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># 正则表达式校验手机号是否输入正确</span></span><br><span class="line">    model = forms.CharField(</span><br><span class="line">        label=<span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">        validators =[RegexValidator(<span class="string">r&#x27;^1\d&#123;10&#125;$&#x27;</span>,<span class="string">&#x27;手机号格式错误&#x27;</span>)]</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></li>
<li>案例<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserModelForm</span>(forms.ModelForm):</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">    model = models.UserInfo</span><br><span class="line">    <span class="comment"># 自定义字段</span></span><br><span class="line">    fields = [<span class="string">&quot;name&quot;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;account&#x27;</span>, <span class="string">&#x27;create_time&#x27;</span>, <span class="string">&#x27;depart&#x27;</span>]</span><br><span class="line">    <span class="comment"># 所有字段</span></span><br><span class="line">    <span class="comment"># fields = &quot;__all__&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 插件（样式）</span></span><br><span class="line">    widgets = &#123;</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span>: forms.PasswordInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">        <span class="string">&#x27;age&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">        <span class="string">&#x27;account&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">        <span class="string">&#x27;create_time&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">        <span class="string">&#x27;depart&#x27;</span>: forms.Select(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># def __init__(self, *args, **kwargs):</span></span><br><span class="line">    <span class="comment">#     super().__init__(*args, **kwargs)</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#     # 循环找到插件，并添加样式</span></span><br><span class="line">    <span class="comment">#     for field in self.fields.items():</span></span><br><span class="line">    <span class="comment">#         field.widget.attrs = &#123;&#x27;class&#x27;: &quot;form-control&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_modelform_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        form = UserModelForm()</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&quot;user_modelform_add.html&quot;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line">    <span class="comment"># 得到用户提交数据</span></span><br><span class="line">    form = UserModelForm(data=request.POST)</span><br><span class="line">    <span class="keyword">if</span> form.is_valid():</span><br><span class="line">        <span class="comment"># 数据合法,保存数据库</span></span><br><span class="line">        form.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;http://127.0.0.1:8000/user/list/&#x27;</span>)</span><br><span class="line">    <span class="comment"># 返回保存有填写错误的信息页面</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;user_modelform_add.html&quot;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure></li>
<li>【user_modelform_add.html】<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">novalidate</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">csrf_token</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> i <span class="keyword">in</span> form %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><span class="template-variable">&#123;&#123; i.label &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-variable">&#123;&#123; i &#125;&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        // 提示错误信息</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123; i.errors.0 &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="编辑用户（ModelForm）"><a href="#编辑用户（ModelForm）" class="headerlink" title="编辑用户（ModelForm）"></a>编辑用户（ModelForm）</h2><ul>
<li>【views.py】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要传递id来查找数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_edit</span>(<span class="params">request, nid</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot; 编辑用户 &quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">    <span class="comment"># 根据id去数据库中寻找到需要修改的一行数据</span></span><br><span class="line">    <span class="comment"># *****first*****</span></span><br><span class="line">    obj = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line">    <span class="comment"># instance参数：modelform默认将数据库中获取的值显示到输入框中供用户看到</span></span><br><span class="line">    form = UserModelForm(instance=obj)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;user_edit.html&quot;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># POST方式返回用户提交的数据</span></span><br><span class="line"><span class="comment"># 先查询到数据</span></span><br><span class="line">obj = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).first()</span><br><span class="line"><span class="comment"># 获取用户提交的数据</span></span><br><span class="line"><span class="comment"># instance=obj使数据库中的数据更新，若没有是直接新增数据</span></span><br><span class="line">form = UserModelForm(data=request.POST, instance=obj)</span><br><span class="line"><span class="keyword">if</span> form.is_valid():  <span class="comment"># 检查输入是否合法</span></span><br><span class="line">    form.save()  <span class="comment"># 自动将用户提交的数据保存到数据库</span></span><br><span class="line">    <span class="comment"># 返回用户列表页面</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;http://127.0.0.1:8000/user/list/&#x27;</span>)</span><br><span class="line">    <span class="comment"># 返回保存有填写错误的信息页面</span></span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&quot;user_modelform_add.html&quot;</span>, &#123;<span class="string">&quot;form&quot;</span>: form&#125;)</span><br></pre></td></tr></table></figure></li>
<li>form.save()<br>默认保存用户输入的所有数据，如若想要用户输入意以外在增加值<br>form.instance.字段名 = 值</li>
</ul>
<hr>
<br>

<h2 id="django查询加入条件"><a href="#django查询加入条件" class="headerlink" title="django查询加入条件"></a>django查询加入条件</h2><ul>
<li>models . PrettyNumobjects.filter( id=12)     ##等于12</li>
<li>models.PrettyNum.objects.filter(id__gt=12)   ##大于12</li>
<li>models.PrettyNum. objects.filter(id__gte=12) ##大于等于12</li>
<li>models.PrettyNum.objects.filter(id_1t=12)    ##小于12</li>
<li>models.PrettyNum. objects.filter(id_lte=12)  ##小于等于12</li>
<li>以字典形式传入<br>  data_dict ={“id_lte” :12}<br>  models.PrettyNum.objects.filter(**data_dict)</li>
</ul>
<hr>
<ul>
<li>mobile是数据表中第一字段</li>
<li>models.PrettyNum.objects.filter ( mobile=”999”)  ##等于</li>
<li>models.PrettyNum;objects.filter(mobile__startswith=”1999”)  ##筛选出以1999开头</li>
<li>models.PrettyNum.objects.filter ( mobile__endswith=”999”)  ##筛选出以999结尾</li>
<li>models.PrettyNum.objects.filter( mobile__contains=”999”)  ##筛选出包含999</li>
<li>以字典形式传入<br>  data_dict = { “mobile__contains”: “”999””}<br>  models.PrettyNum.objects.fi.lter(**data_dict)</li>
</ul>
<hr>
<br>

<h2 id="案例：手机号搜索"><a href="#案例：手机号搜索" class="headerlink" title="案例：手机号搜索"></a>案例：手机号搜索</h2><ul>
<li>在靓号列表页面，以get方式获取用户输入的部分手机号，然后使用modelform条件查询语句来查询，作为参数传入html文件中</li>
<li>与之前靓号列表区别：num_list为符合条件的手机号<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 定义一个空字典</span></span><br><span class="line">    data_dict = &#123;&#125;</span><br><span class="line">    <span class="comment"># 获取用户前端页面输入的值，get方式</span></span><br><span class="line">    value = request.GET.get(<span class="string">&#x27;q&#x27;</span>)</span><br><span class="line">    <span class="comment"># 是否为空，空的就是所有</span></span><br><span class="line">    <span class="keyword">if</span> value:</span><br><span class="line">        data_dict[<span class="string">&#x27;model__contains&#x27;</span>] = value</span><br><span class="line">    num_list = PrettyNum.objects.<span class="built_in">filter</span>(**data_dict)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;pretty_list.html&quot;</span>, &#123;<span class="string">&#x27;num_list&#x27;</span>: num_list&#125;)</span><br></pre></td></tr></table></figure></li>
<li>前端页面<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: right;width: 300px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-group&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search for...&quot;</span>&gt;</span>   </span></span><br><span class="line"><span class="language-xml">                ## name用来后端接收数据value = request.GET.get(&#x27;q&#x27;)</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;input-group-btn&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>创建多条数据<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pretty_list</span>(<span class="params">request</span>):</span><br><span class="line">创建多条数据</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">    PrettyNum.objects.create(model=<span class="string">&quot;12356457893&quot;</span>, price=<span class="number">45</span>, level=<span class="number">1</span>, status=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="自定义bootstrap类"><a href="#自定义bootstrap类" class="headerlink" title="自定义bootstrap类"></a>自定义bootstrap类</h2><ul>
<li>【utils文件】—&gt; 封装的函数<br><img src="/image/42.png"></li>
</ul>
<hr>
<br>

<h2 id="按功能分类"><a href="#按功能分类" class="headerlink" title="按功能分类"></a>按功能分类</h2><ul>
<li>在【app1】下创建views文件</li>
<li>在【views】下创建功能的py文件<br>  将每一个功能写到对应的功能.py文件下</li>
<li>修改【utils文件】<ul>
<li>导入：from app1.views improt user,depart,prettyNum</li>
<li>path(‘/depart/list/‘,depart.departlist)<br>原来：( path(‘/depart/list/‘,views.departlist) )</li>
</ul>
</li>
</ul>
<hr>
<br>

<h2 id="密码校验"><a href="#密码校验" class="headerlink" title="密码校验"></a>密码校验</h2><ul>
<li>【views文件】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AdminModelForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="comment"># 添加数据库中没有的字段</span></span><br><span class="line">    confirm_password = forms.CharField(</span><br><span class="line">        label=<span class="string">&quot;确认密码&quot;</span>, </span><br><span class="line">        widget=forms.PasswordInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = models.Admin</span><br><span class="line">        <span class="comment"># 需要在前端显示的字段</span></span><br><span class="line">        fields = [<span class="string">&quot;user&quot;</span>, <span class="string">&quot;password&quot;</span>, <span class="string">&#x27;confirm_password&#x27;</span>]</span><br><span class="line">        <span class="comment"># 插件：样式</span></span><br><span class="line">        <span class="comment"># &#x27;password&#x27;: forms.PasswordInput(attrs=&#123;&#x27;class&#x27;: &quot;form-control&quot;&#125;, render_value=True)</span></span><br><span class="line">        <span class="comment"># render_value = True参数：错误后不会置空</span></span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="string">&#x27;password&#x27;</span>: forms.PasswordInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;),</span><br><span class="line">            <span class="string">&#x27;user&#x27;</span>: forms.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;form-control&quot;</span>&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 密码校验</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_confirm_password</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 拿到用户输入的两次密码   form.cleaned_data</span></span><br><span class="line">        <span class="comment"># print(form.cleaned_data)</span></span><br><span class="line">        <span class="comment"># &#123;&#x27;user&#x27;: &#x27;学生&#x27;, &#x27;password&#x27;: &#x27;123&#x27;, &#x27;confirm_password&#x27;: &#x27;123&#x27;&#125;</span></span><br><span class="line">        password = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        confirm_password = self.cleaned_data.get(<span class="string">&quot;confirm_password&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> password != confirm_password:</span><br><span class="line">            <span class="comment"># 抛出异常，需要导包  from django.core.exceptions import ValidationError</span></span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码不一致，请重新输入&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> confirm_password</span><br></pre></td></tr></table></figure></li>
<li>md5加密:【utils】<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">from</span> Manage_System_Project <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot; md5加密 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">md5</span>(<span class="params">data_string</span>):</span><br><span class="line">    <span class="comment"># 加盐</span></span><br><span class="line">    obj = hashlib.md5(settings.SECRET_KEY.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">    obj.update(data_string.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span> obj.hexdigest()</span><br></pre></td></tr></table></figure></li>
<li>使用<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="comment"># 密码加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">    password = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> md5(password)</span><br></pre></td></tr></table></figure></li>
<li>密码与修改前密码不一致<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 密码加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clean_password</span>(<span class="params">self</span>):</span><br><span class="line">    password = self.cleaned_data.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">    md5_password = md5(password)</span><br><span class="line">    <span class="comment"># 判断密码是否与上次一致：获取的密码是否在数据库中存在</span></span><br><span class="line">    <span class="comment"># self.instance.pk获取用户当前输入的密码信息这条数据的id</span></span><br><span class="line">    exist = Admin.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=self.instance.pk, password=md5_password).exists()</span><br><span class="line">    <span class="keyword">if</span> exist:</span><br><span class="line">        <span class="keyword">raise</span> ValidationError(<span class="string">&quot;密码与修改前一致&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> md5(password)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="cookie和session"><a href="#cookie和session" class="headerlink" title="cookie和session"></a>cookie和session</h2><ul>
<li>cookie: 浏览器向网站（服务端）发送请求时，网站给浏览器返回的响应头，并保存到浏览器的键字对，下一次在发送请求时自动携带</li>
<li>session：网站（服务端）保存的请求的信息<br>  <img src="/image/22.jpg"></li>
<li>只有在登录后能使用的功能，需要使用中间件组件</li>
</ul>
<hr>
<br>

<h2 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h2><ul>
<li>概念图<br><img src="/image/43.png" alt="中间件"></li>
<li>定义中间件<ul>
<li>app中创建文件</li>
<li>文件创建.py文件</li>
<li>定义类：<ul>
<li>process_request<ul>
<li>如果没有返回值（返回None）,继续向后走</li>
<li>如果有返回值HttpResponse、render、redirect，则不再继续执行</li>
</ul>
</li>
<li>process_response </li>
</ul>
</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> redirect</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AuthMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1.排除不需要登录就能访问的页面</span></span><br><span class="line">        <span class="keyword">if</span> request.path_info == <span class="string">&#x27;/login/&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 2.读取当前访问的用户的session信息，如果能读到，说明登录过，继续向后</span></span><br><span class="line">            info_dict = request.session.get(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(info_dict)</span><br><span class="line">            <span class="keyword">if</span> info_dict:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 3.没有登录过，返回登录列表</span></span><br><span class="line">                <span class="keyword">return</span> redirect(<span class="string">&#x27;http://127.0.0.1:8000/login/&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>注册中间件<br>【setting】—&gt;MIDDLEWARE<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app1.middleware.auth.AuthMiddleware&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="注销功能"><a href="#注销功能" class="headerlink" title="注销功能"></a>注销功能</h2><ul>
<li>【layout.html】模板页面中传参</li>
<li>request.session.clear()<br>清楚session中的信息</li>
<li>登录成功显示用户名字 </li>
</ul>
<hr>
<br>

<h2 id="图片验证码"><a href="#图片验证码" class="headerlink" title="图片验证码"></a>图片验证码</h2><ul>
<li>安装第三方包：pip install pillow</li>
<li></li>
</ul>
<hr>
<br>

<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><ul>
<li>通过前端向指定的url发送Ajax请求，在url的视图函数接收数据，在处理数据，后端返回JsonResponse处理数据的status信息，前端页面通过后端返回的信息在进行判断显示相应的信息</li>
</ul>
<hr>
<ul>
<li>1.get请求</li>
<li>前端发送请求<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">block</span></span> content%&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span> 任务管理<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;clickMe();&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endblock</span></span> %&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>【js】发送ajax请求</li>
<li><img src="/image/44.png">   <figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">block</span></span> js %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">clickMe</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $.<span class="title function_">ajax</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">url</span>: <span class="string">&#x27;/text/ajax/&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">n1</span>: <span class="number">123</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">n2</span>: <span class="number">456</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endblock</span></span> %&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li>2.接收post请求（需要免除csrf认证，没有会报错）</li>
<li>在发请求的地址–》视图函数<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">text_ajax</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;成功&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li>返回值<br>返回一个json格式<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">text_ajax</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 第一种方式</span></span><br><span class="line">    <span class="keyword">import</span> json</span><br><span class="line">    data_dirt = &#123;<span class="string">&quot;statue&quot;</span>: <span class="literal">True</span>, <span class="string">&quot;data&quot;</span>: [<span class="number">11</span>, <span class="number">22</span>]&#125;</span><br><span class="line">    json_str = json.dumps(data_dirt)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(json_str)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#第二种</span></span><br><span class="line">    <span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line">    data_dirt = &#123;<span class="string">&quot;statue&quot;</span>: <span class="literal">True</span>, <span class="string">&quot;data&quot;</span>: [<span class="number">11</span>, <span class="number">22</span>]&#125;</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(data_dirt)</span><br></pre></td></tr></table></figure></li>
<li>返回的数据：<ul>
<li>后端：返回JOSN数据</li>
<li>前端：在script中添加dataType: “JSON”内部处理,前端就会接收到一个对象res<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">clickMe</span>(<span class="params"></span>) &#123;</span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/text/ajax/&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">n1</span>: <span class="number">123</span>,</span><br><span class="line">                <span class="attr">n2</span>: <span class="number">456</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">dataType</span>: <span class="string">&#x27;JSON&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">statue</span>)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;<span class="string">``</span><span class="string">`</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>示例二: 绑定点击事件  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>示例二<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtName&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtAge&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">//页面框架加载完成之后自动执行</span></span><br><span class="line">        <span class="title function_">bindBtn1Event</span>();</span><br><span class="line"></span><br><span class="line">        <span class="title function_">bindBtn2Event</span>();</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span>  <span class="title function_">bindBtn2Event</span>(<span class="params"></span>)&#123;</span><br><span class="line">        $(<span class="string">&quot;#btn2&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">            $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&#x27;/text/ajax/&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    <span class="attr">name</span>: $(<span class="string">&#x27;#txtName&#x27;</span>).<span class="title function_">val</span>(),</span><br><span class="line">                    <span class="attr">age</span>: $(<span class="string">&#x27;#txtAge&#x27;</span>).<span class="title function_">val</span>()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li>示例三: 多个输入  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>示例三<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;txtName&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;txtAge&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;txtEmail&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;年龄&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>$(“#form”).serialize():将form表单中数据全部拿到在打包发送到django后台 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>  <span class="title function_">bindBtn3Event</span>(<span class="params"></span>)&#123;</span><br><span class="line">    $(<span class="string">&#x27;#form&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/text/ajax/&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: $(<span class="string">&quot;#form&quot;</span>).<span class="title function_">serialize</span>(),</span><br><span class="line">            <span class="attr">dataType</span>: <span class="string">&#x27;JSON&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<br>

<h2 id="Ajax添加对话框"><a href="#Ajax添加对话框" class="headerlink" title="Ajax添加对话框"></a>Ajax添加对话框</h2><ul>
<li>排除某个字段：exclude = [‘oid’]</li>
<li>点击保存按钮：前端js添加绑定事件，向order_add地址发送ajax请求</li>
<li>在order_add来接收请求</li>
<li>显示错误信息<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">bindBtnSaveEvent</span>(<span class="params"></span>)&#123;</span><br><span class="line">    $(<span class="string">&quot;#btnSave&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">//清除所有的错误信息</span></span><br><span class="line">        $(<span class="string">&quot;.error-msg&quot;</span>).<span class="title function_">empty</span>()</span><br><span class="line"></span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/order/add/&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: $(<span class="string">&#x27;#formAdd&#x27;</span>).<span class="title function_">serialize</span>(),</span><br><span class="line">            <span class="attr">dataType</span>: <span class="string">&#x27;JSON&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span> (res.<span class="property">status</span>) &#123;</span><br><span class="line">                    <span class="title function_">alert</span>(<span class="string">&quot;保存成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 清空表单用户输入的信息,首先需要找到表单</span></span><br><span class="line">                    $(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 关闭对话框</span></span><br><span class="line">                    $(<span class="string">&quot;#myModal&quot;</span>).<span class="title function_">modal</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//刷新页面</span></span><br><span class="line">                    location.<span class="title function_">reload</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 网页源码找到错误信息</span></span><br><span class="line">                    $.<span class="title function_">each</span>(res.<span class="property">error</span>, <span class="keyword">function</span> (<span class="params">name, errorList</span>)&#123;</span><br><span class="line">                        $(<span class="string">&quot;#id_&quot;</span> + name).<span class="title function_">next</span>().<span class="title function_">text</span>(errorList[<span class="number">0</span>])</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>保存到数据库中需要额外增加一些值(用户没有输入的值)<br>  form.instance.oid = datetime.now().strftime(“%Y%m%d%H%M%S”) + str(random.randint(1000, 9999))</li>
<li>获取当前登录用户相关的信息（如若没有需要修改登录时的session信息）<br>  通过session获取当前登录页面的用户id<br>  request.session[“info”][“id”]<br>  <em><strong>注意多表绑定的字段名：xxx_id</strong></em></li>
</ul>
<hr>
<ul>
<li>需要用户填写得信息较多<br>  选择新建一个页面进行用户输入</li>
<li>需要用户填写较少的信息<br>  使用Ajax对话框形式输入</li>
</ul>
<hr>
<br>

<h2 id="Ajax删除对话框"><a href="#Ajax删除对话框" class="headerlink" title="Ajax删除对话框"></a>Ajax删除对话框</h2><ul>
<li>利用全局变量获取当前删除的id。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//获取当前行的id</span></span><br><span class="line"><span class="variable constant_">DELETE_ID</span> = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;uid&quot;</span>);   </span><br><span class="line"><span class="comment">//获取到uid标签的值</span></span><br><span class="line"><span class="keyword">var</span> uid = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&quot;uid&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li>清除对话框内容<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//清除对话框</span></span><br><span class="line">$(<span class="string">&quot;#formAdd&quot;</span>)[<span class="number">0</span>].<span class="title function_">reset</span>();       </span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="Ajax编辑对话框"><a href="#Ajax编辑对话框" class="headerlink" title="Ajax编辑对话框"></a>Ajax编辑对话框</h2><ul>
<li>row_obj = Order.objects.filter(id=uid).first()<ul>
<li>得到的是一个对象（当前行所有数据）</li>
</ul>
</li>
<li>row_obj = Order.objects.filter(id=uid).values(“id”, “title”).first()<ul>
<li>得到是一个字典（{id：12， title: “xxx”}）</li>
</ul>
</li>
<li>row_obj = Order.objects.all()<ul>
<li>得到是一个queryset，quertset是一个列表。queryset=[obj，obj····]</li>
</ul>
</li>
<li>给编辑框默认值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">each</span>(res.<span class="property">data</span>,<span class="keyword">function</span> (<span class="params">name,value</span>)&#123;</span><br><span class="line">    $(<span class="string">&quot;#id_&quot;</span>+ name).<span class="title function_">val</span>(value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<br>

<h2 id="Ajax知识点"><a href="#Ajax知识点" class="headerlink" title="Ajax知识点"></a>Ajax知识点</h2><ul>
<li>post请求<ul>
<li>前端<ul>
<li>接收用户输入: input输入框<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    name : $(&#x27;#admin_Name&#x27;).val(),</span><br><span class="line">    password : $(&#x27;#admin_Password&#x27;).val(),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>绑定点击事件：input，button，a</li>
<li>点击展示弹出框<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#btnAdmin1&quot;).click(function ()&#123;</span><br><span class="line">    $(&quot;#myModal3&quot;).modal(&quot;show&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>后端<ul>
<li>获取数据<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">email = request.POST.get(<span class="string">&quot;email&quot;</span>)</span><br><span class="line">password = request.POST.get(<span class="string">&quot;password&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li>发送post请求的地址需要：@csrf_exempt</li>
<li>最后返回的是：return JsonResponse({“status”: True})</li>
<li>保存至数据库<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserInfo.objects.create(enterprise=enterprise)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li>返回其他页面：window.location.href = ‘/user/list/‘</li>
<li>点击图片跳转其他页面<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/login/&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;images/logo.png&#x27; %&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Logo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<br>

<h2 id="ECharts"><a href="#ECharts" class="headerlink" title="ECharts"></a>ECharts</h2><ul>
<li><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/index.html">https://echarts.apache.org/zh/index.html</a></li>
<li>官网找配置</li>
</ul>
<hr>
<br>

<h2 id="HighCharts"><a href="#HighCharts" class="headerlink" title="HighCharts"></a>HighCharts</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.hcharts.cn/">https://www.hcharts.cn/</a></li>
</ul>
<hr>
<br>

<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><ul>
<li>表单需要加条件:enctype=”multipart/form-data”<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">csrf_token</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>获取用户提交文件<br>request.FILES<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.FILES)  <span class="comment"># &lt;MultiValueDict: &#123;&#125;&gt;</span></span><br><span class="line"><span class="comment"># 获取文件</span></span><br><span class="line">file_obj = request.FILES.get(<span class="string">&quot;avatar&quot;</span>)</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;a1.png&quot;</span>, mode=<span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> file_obj.chunks():</span><br><span class="line">        f.write(chunk)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></li>
<li>表单其余的提交在<br>request.POST<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(request.POST)  <span class="comment"># &lt;QueryDict: &#123;&#125;&gt;</span></span><br><span class="line"><span class="comment"># 获取post提交的数据</span></span><br><span class="line">name = request.POST.get(<span class="string">&quot;username&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：Django</li>
        <li>本文作者：Xu</li>
        <li>创建时间：2022-11-17 21:57:31</li>
        <li>
            本文链接：http://example.com/2022/11/17/Django/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/%E6%A1%86%E6%9E%B6/">#框架</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2022/12/28/Restful-API/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">Restful API</span>
                                    <span class="post-nav-item">上一篇</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2022/11/16/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">小程序</span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">Django</div>
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-text">创建项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="nav-text">默认文件介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text"></span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#App"><span class="nav-text">App</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8django"><span class="nav-text">启动django</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#templates%E6%A8%A1%E6%9D%BF"><span class="nav-text">templates模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6"><span class="nav-text">静态文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#django%E6%A8%A1%E5%9D%97%E8%AF%AD%E6%B3%95"><span class="nav-text">django模块语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94"><span class="nav-text">请求和响应</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#orm%E2%80%94-gt-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-text">orm—&gt;数据库操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-text">案例：用户管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-text">创建表结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E5%85%B3%E8%81%94%EF%BC%88%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%81%94%E9%80%9A%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%89"><span class="nav-text">表关联（案例：联通部门管理系统）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="nav-text">模板的继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%81%94%E9%80%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86"><span class="nav-text">案例：联通员工管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Form%E7%BB%84%E4%BB%B6"><span class="nav-text">Form组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ModelForm%E7%BB%84%E4%BB%B6"><span class="nav-text">ModelForm组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E7%94%A8%E6%88%B7%EF%BC%88ModelForm%EF%BC%89"><span class="nav-text">编辑用户（ModelForm）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#django%E6%9F%A5%E8%AF%A2%E5%8A%A0%E5%85%A5%E6%9D%A1%E4%BB%B6"><span class="nav-text">django查询加入条件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%89%8B%E6%9C%BA%E5%8F%B7%E6%90%9C%E7%B4%A2"><span class="nav-text">案例：手机号搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89bootstrap%E7%B1%BB"><span class="nav-text">自定义bootstrap类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%89%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB"><span class="nav-text">按功能分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%86%E7%A0%81%E6%A0%A1%E9%AA%8C"><span class="nav-text">密码校验</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cookie%E5%92%8Csession"><span class="nav-text">cookie和session</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-text">中间件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E9%94%80%E5%8A%9F%E8%83%BD"><span class="nav-text">注销功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-text">图片验证码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax"><span class="nav-text">Ajax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax%E6%B7%BB%E5%8A%A0%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="nav-text">Ajax添加对话框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax%E5%88%A0%E9%99%A4%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="nav-text">Ajax删除对话框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax%E7%BC%96%E8%BE%91%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="nav-text">Ajax编辑对话框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="nav-text">Ajax知识点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ECharts"><span class="nav-text">ECharts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HighCharts"><span class="nav-text">HighCharts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-text">文件上传</span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>



        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-regular fa-computer-classic"></i>&nbsp;&nbsp;<a href="/">Xu</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span>
                <br> 
            <span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v</a>
        </div>
        
        
        
            <div id="start_time_div" style="display:none">
                2022/8/17 11:45:14
            </div>
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="unfolded-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="fa-regular fa-arrow-up"></i>
            </li>
        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="folded-tools-list">
        <li class="right-bottom-tools tool-toggle-show flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/menu-shrink.js"></script>

<script src="/js/tools/go-top-bottom.js"></script>

<script src="/js/tools/dark-light-toggle.js"></script>





    
<script src="/js/tools/code-block.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/layouts/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">





<div class="post-scripts pjax">
    
        
<script src="/js/tools/toc-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            REDEFINE.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            REDEFINE.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            REDEFINE.refresh();
        });
    });
</script>




<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
